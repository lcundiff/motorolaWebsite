<html>
<title>Match</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" type="text/css" href="/modules/core/client/css/core.css">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" href="https://www.w3schools.com/lib/w3-theme-black.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

<style>
  .highlight {
    background-color: blue;
  }

  .black-text {
    color: #000;
  }

  .margin-top {
    margin-top: 5px;
    margin-bottom: 5px;
  }

  .width-setter {
    width: 35% !important;
  }

  .center-text {
    text-align: center;
  }

  .match-button {
    width: 30%;
    display: inline-block;
    margin-top: 25px;
    margin-left: 12px;
    margin-right: 12px;
    margin-bottom: 25px;

  }
</style>


<!-- Main content: shift it to the right by 250 pixels when the sidebar is visible -->
<div class="w3-main" style="margin-left:0px" ng-controller="AdminsController as vm" ng-init="getAllVolunteersForSession1(); getAllVolunteersForSession2(); getAllVolunteersForSession3()">
  <div style="background-color:#003d66 ; font-weight:bold; color:white; padding:25px; margin-bottom: 0; margin-left: calc(50% - 50vw); width:100vw;" class="container">
    <center>
      <h1 style="font-weight:bold;">Matching</h1>
    </center>
  </div>

  <div class="col-lg-13">
    <center>
      <button class="btn btn-primary margin-top btn-lg match-button" ng-click="match()" confirm="Yes?">Manually Match Selection</button>
      <button class="btn btn-primary margin-top btn-lg match-button" ng-click="automatchallsessions()">Auto-Match All Students</button>
    </center>
  </div>

  <div class="col-lg-8 top-margin-2" style="margin-left:-8%;" >
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title"><i style="padding:10;"></i> <b>Applicants</b></h3>
      </div>

      <div class="row" ng-init='listStudent()'>

        <center>
          <p class="black-text margin-top">Student Selected: <input class="width-setter center-text" type="text" ng-model="selectedStu"></p>
        </center>

        <div class="col-md-12">
          <div class="input-group" id="searchBar">
            <span class="input-group-addon" id="sizing-addon1"><span class="glyphicon glyphicon-search"></span></span>
            <input type="text" class="form-control" placeholder="Search" ng-model="query_1">
          </div>
        </div>


        <div class="col-md-12">
          <div ng-show="error" class="text-danger">
            <strong ng-bind="error"></strong>
          </div>
          <div ng-show="success" class="text-success">
            <strong ng-bind="success"></strong>
          </div>
          <div class="tableWrapper">
            <table id="applicants" class="table table-striped table-hover">
              <tr class="header">
                <th><a ng-click="a_sortType = 'timeSlot[0]'; a_sortReverse = !a_sortReverse">Session<span ng-show="a_sortType == 'timeSlot[0]'" class="fa fa-caret-down"></span></a></th>
                <th><a ng-click="a_sortType = 'application.name'; a_sortReverse = !a_sortReverse">Student<span ng-show="a_sortType == 'application.name'" class="fa fa-caret-down"></span></a></th>
                <th><a ng-click="a_sortType = 'interests'; a_sortReverse = !a_sortReverse">Interests<span ng-show="a_sortType == 'interests'" class="fa fa-caret-down"></span></a></th>
                <th><a ng-click="a_sortType = 'mentor'; a_sortReverse = !a_sortReverse">Mentor<span ng-show="a_sortType == 'mentor'" class="fa fa-caret-down"></span></a></th>
                <th>Unmatch</th>
              </tr>
              <tbody>
              <tr ng-repeat="student in students | filter: query_1 | orderBy:a_sortType:a_sortReverse" ng-click="addSelectedStudent(student)">
                <td>{{student.timeSlot[0]}}</a></td>
                <td>{{student.application.name}}</td>
                <td>{{student.interests.toString()}}</td>
                <td>{{student.mentor}}</td>
                <td><br><div class="margin-top margins"><a class="btn btn-sm btn-danger" style="margin-top:-20px; margin-right:22px;" data-ng-if="student.mentor !== ''" ng-click="unmatch(student.user._id)"><i class=""></i>Unmatch</a></div></td>
              </tr>
            </tbody>

            </table>
          </div>
        </div>
      </div>

    </div>
  </div>

  <!---- Volunteers -->

  <div class="col-lg-6 top-margin-2" style="margin-right:-15%;">
    <div class="panel panel-default">

      <div class="panel-heading">
        <h3 class="panel-title"><i style="padding:10; "></i> <b>Volunteers</b></h3>
      </div>

      <div class="row" ng-init='listMentors()'>

        <center>
          <p class="black-text margin-top">Volunteer Selected: <input class="width-setter center-text" type="text" ng-model="selectedVol"></p>
        </center>

        <div class="col-md-12">
          <div class="input-group" id="searchBar_1">
            <span class="input-group-addon" id="sizing-addon1"><span class="glyphicon glyphicon-search"></span></span>
            <input type="text" class="form-control" placeholder="Search" ng-model="query_2">
          </div>
        </div>

        <div class="col-md-12">
          <div ng-show="error" class="text-danger">
            <strong ng-bind="error"></strong>
          </div>
          <div ng-show="success" class="text-success">
            <strong ng-bind="success"></strong>
          </div>
          <div class="tableWrapper">
            <table id="volunteers" class="table table-striped table-hover">
              <thead style="position: sticky;">
              <tr>
                <th><a ng-click="v_sortType = 'application.name'; v_sortReverse = !v_sortReverse">Volunteer<span ng-show="v_sortType == 'application.name'" class="fa fa-caret-down"></span></a></th>
                <th><a ng-click="v_sortType = 'areaofexpertise'; v_sortReverse = !v_sortReverse">Expertise (Chosen field)<span ng-show="v_sortType == 'areaofexpertise'" class="fa fa-caret-down"></span></a></th>
                <th><a ng-click="v_sortType = 'mentee'; v_sortReverse = !b_sortReverse">Mentee<span ng-show="v_sortType == 'mentee'" class="fa fa-caret-down"></span></a></th>
              </tr>
            </thead>
            <tbody>
              <tr ng-repeat="volunteer in mentor_volunteers | filter: query_2 | orderBy:v_sortType:v_sortReverse" ng-click="addSelectedVolunteer(volunteer)">
                <td>{{volunteer.application.name}}</td>
                <td>{{volunteer.areaofexpertise}}</td>
                <td>{{volunteer.mentee.toString()}}</td>
              </tr>
            </tbody>

            </table>
          </div>
        </div>
      </div>
    </div>

    </body>

</html>
